#!/bin/bash

# === Configurazione ===
WOFI_CMD="wofi --dmenu --width=800 --height=200 --columns=6 --hide-scroll --prompt Power"

# === Voci del menu ===
options=(
  "â» Spegni"
  "ðŸ” Riavvia"
  "ðŸ’¤ Sospendi"
  "ðŸŒ™ Iberna"
  "ðŸ”’ Blocca"
  "ðŸšª Esci"
)
menu="$(printf '%s\n' "${options[@]}")"

# === Mostra menu ===
choice=$(echo "$menu" | $WOFI_CMD)

# === Esegui l'azione ===
case "$choice" in
  "â» Spegni")
    systemctl poweroff
    ;;
  "ðŸ” Riavvia")
    systemctl reboot
    ;;
  "ðŸ’¤ Sospendi")
    systemctl suspend
    ;;
  "ðŸŒ™ Iberna")
    systemctl hibernate
    ;;
  "ðŸ”’ Blocca")
    if command -v swaylock &>/dev/null; then
      swaylock
    elif command -v hyprlock &>/dev/null; then
      hyprlock
    else
      notify-send "Locker non trovato"
    fi
    ;;
  "ðŸšª Esci")
    if command -v loginctl &>/dev/null; then
      loginctl terminate-user "$USER"
    else
      pkill -KILL -u "$USER"
    fi
    ;;
  *)
    # Chiuso o annullato
    ;;
esac
